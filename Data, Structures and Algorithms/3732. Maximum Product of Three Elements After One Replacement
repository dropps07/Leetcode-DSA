class Solution {
    public long maxProduct(int[] nums) {
        int n= nums.length;
        long max1= Long.MIN_VALUE;
        long max2= Long.MIN_VALUE;
        long max3= Long.MIN_VALUE;

        long min2= Long.MAX_VALUE;
        long min1= Long.MAX_VALUE;

        long v1=0;
        long v2=0;
        
        for(int x: nums){
            long v = x;
            //min values
            if(v<min1){
                min2 = min1;
                min1 = v;
            }else if(v<min2){
                min2 = v;
            }
            //max values
            if(v>max1){
                max3= max2;
                max2=max1;
                max1= v;
            }else if(v>max2){
                max3=max2;
                max2= v;
            }else if(v>max3){
                max3 = v;
            }
        }
        int c [] = nums.clone();
        v1= 1L * min1 * min2 * max1;
        v2= 1L * max1 * max2 * max3;
        long original = Math.max(v1, v2);
        long positive = Math.max(max1* max2, min1 * min2);
        long negative = max1*min1;
        long r = 100000L;
        long cand1 = r * positive;
        long cand2 = negative < 0 ? -r * negative : Long.MIN_VALUE;

        return Math.max(original, Math.max(cand1, cand2));
    }
}
